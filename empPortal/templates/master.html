<!DOCTYPE html>
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  {% include 'head.html' %}
  {% load static %}
  <script src="{% static 'dist/js/jquery.min.js' %}"></script>
  <script src="{% static 'dist/js/custom.js' %}"></script>
</head>

<style>
  #loader {
  position: fixed;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9); /* Semi-transparent background */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

#loader img {
  width: 500px; /* Adjust size as needed */
  height: auto;
}

</style>
<div id="loader">
  <img src="/empPortal/static/dist/img/loader.gif" alt="Loading..." />
</div>
{% block content %}
  
{% endblock %}

<script>
  window.addEventListener("load", function () {
      document.getElementById("loader").style.display = "none";
  });
</script>


  <!-- jQuery (Must be Loaded First) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- jQuery Validate Plugin (Must be Loaded After jQuery) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
                      
<!-- jQuery Validation Script -->
<script>
  $(document).ready(function () {
    console.log("jQuery Loaded:", !!window.jQuery);
    console.log("jQuery Validate Loaded:", typeof $.fn.validate !== "undefined");

    $("#registerForm").validate({
        rules: {
            full_name: {
                required: true,
                minlength: 3,
                maxlength: 30
            },
            gender: {
                required: true
            },
            email: {
                required: true,
                email: true,
                remote: {
                    url: "/check-email/", // Django view to check email
                    type: "POST",
                    data: {
                        email: function () {
                            return $("#email").val();
                        },
                        csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val()
                    },
                    dataFilter: function (response) {
                        var data = JSON.parse(response);
                        return data.exists ? "false" : "true"; // 'false' means email is taken
                    }
                }
            },
            mobile: {
                required: true,
                digits: true,
                minlength: 10,
                maxlength: 10,
                remote: {
                    url: "/check-mobile/", // Django view to check email
                    type: "POST",
                    data: {
                        mobile: function () {
                            return $("#mobile").val();
                        },
                        csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val()
                    },
                    dataFilter: function (response) {
                        var data = JSON.parse(response);
                        return data.exists ? "false" : "true"; // 'false' means email is taken
                    }
                }
            },
            password: {
                required: true,
                minlength: 6
            },
            confirm_password: {
                required: true,
                minlength: 6,
                equalTo: "#password" // Ensures confirm_password matches password
            },
            terms: {
                required: true
            }
        },
        messages: {
            full_name: {
                required: "Please enter your full name",
                minlength: "Name must be at least 3 characters long"
            },
            email: {
                required: "Please enter your email",
                email: "Enter a valid email",
                remote: "This email is already registered."
            },
            mobile: {
                required: "Please enter your mobile number",
                digits: "Only numbers allowed",
                minlength: "Must be 10 digits",
                maxlength: "Must be 10 digits",
                remote: "This mobile is already registered."
            },
            password: {
                required: "Please enter your password",
                minlength: "Password must be at least 6 characters long"
            },
            confirm_password: {
                required: "Please confirm your password",
                minlength: "Password must be at least 6 characters long",
                equalTo: "Passwords do not match"
            },
            terms: {
                required: "You must agree to the Terms & Conditions"
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("text-danger");
            error.insertAfter(element);
        },
        submitHandler: function (form) {
            form.submit();
        }
    });
});

  </script>

  
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

  <!-- jQuery Validate Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>

<script>
  $(document).ready(function() {
      $("#user-form-validate").validate({
          rules: {
              first_name: {
                  required: true,
                  minlength: 2,
                  maxlength: 50
              },
              last_name: {
                  required: true,
                  minlength: 2,
                  maxlength: 50
              },
              email: {
                  required: true,
                  email: true
              },
              phone: {
                  required: true,
                  digits: true,
                  minlength: 10,
                  maxlength: 10
              },
              gender: {
                  required: true
              },
              dob: {
                  required: true,
                  date: true
              },
              state: {
                  required: true
              },
              city: {
                  required: true
              },
              pincode: {
                  required: true,
                  digits: true,
                  minlength: 6,
                  maxlength: 6
              },
              address: {
                  required: true,
                  minlength: 5
              }
          },
          messages: {
              first_name: {
                  required: "Please enter your first name",
                  minlength: "First name must be at least 2 characters",
                  maxlength: "First name cannot exceed 50 characters"
              },
              last_name: {
                  required: "Please enter your last name",
                  minlength: "Last name must be at least 2 characters",
                  maxlength: "Last name cannot exceed 50 characters"
              },
              email: {
                  required: "Please enter your email",
                  email: "Enter a valid email address"
              },
              phone: {
                  required: "Please enter your phone number",
                  digits: "Only numbers allowed",
                  minlength: "Phone number must be 10 digits",
                  maxlength: "Phone number must be 10 digits"
              },
              gender: {
                  required: "Please select your gender"
              },
              dob: {
                  required: "Please enter your date of birth",
                  date: "Enter a valid date"
              },
              state: {
                  required: "Please enter your state"
              },
              city: {
                  required: "Please enter your city"
              },
              pincode: {
                  required: "Please enter your pincode",
                  digits: "Only numbers allowed",
                  minlength: "Pincode must be 6 digits",
                  maxlength: "Pincode must be 6 digits"
              },
              address: {
                  required: "Please enter your address",
                  minlength: "Address must be at least 5 characters long"
              }
          },
          errorElement: "div",
          errorPlacement: function(error, element) {
              error.addClass("text-danger");
              error.insertAfter(element);
          },
          submitHandler: function(form) {
              form.submit();
          }
      });
  });
</script>

<!-- jQuery Validate Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>

<script>
  $(document).ready(function () {
    $("#editCommissionForm").validate({
        rules: {
            product: {
                required: true
            },
            tp_percentage: {
                required: true,
                number: true,
                min: 0,
                max: 100
            },
            od_percentage: {
                required: true,
                number: true,
                min: 0,
                max: 100
            },
            net_percentage: {
                required: true,
                number: true,
                min: 0,
                max: 100
            }
        },
        messages: {
            product: {
                required: "Please select a product"
            },
            tp_percentage: {
                required: "Please enter TP percentage",
                number: "Enter a valid number",
                min: "Value must be at least 0%",
                max: "Value cannot exceed 100%"
            },
            od_percentage: {
                required: "Please enter OD percentage",
                number: "Enter a valid number",
                min: "Value must be at least 0%",
                max: "Value cannot exceed 100%"
            },
            net_percentage: {
                required: "Please enter Net percentage",
                number: "Enter a valid number",
                min: "Value must be at least 0%",
                max: "Value cannot exceed 100%"
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("text-danger");
            error.insertAfter(element);
        },
        submitHandler: function (form) {
            form.submit();
        }
    });
  });
</script>
<!-- jQuery Validate Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>

<script>
    $(document).ready(function () {
    console.log("jQuery Loaded:", !!window.jQuery);
    console.log("jQuery Validate Loaded:", typeof $.fn.validate !== "undefined");

    // Custom method for IFSC validation
    $.validator.addMethod("ifscPattern", function (value, element) {
        return this.optional(element) || /^[A-Z]{4}0[A-Z0-9]{6}$/.test(value);
    }, "Enter a valid IFSC code (e.g., ABCD0123456)");

    $("#bank-form").validate({
        rules: {
            account_holder_name: {
                required: true,
                minlength: 3,
                maxlength: 50
            },
            account_number: {
                required: true,
                digits: true,
                minlength: 6,
                maxlength: 18,
                remote: {
                    url: "/check-account-number/",  // Django view to check account number
                    type: "POST",
                    data: {
                        account_number: function () {
                            return $("#editAccountNumber").val();
                        },
                        csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val()
                    },
                    dataFilter: function (response) {
                        var data = JSON.parse(response);
                        return data.exists ? "false" : "true"; // 'false' means account number is taken
                    }
                }
            },
            re_enter_account_number: {
                required: true,
                digits: true,
                minlength: 6,
                maxlength: 18,
                equalTo: "#editAccountNumber"
            },
            ifsc_code: {
                required: true,
                ifscPattern: true // Use the custom validation method
            },
            city: {
                required: true
            },
            state: {
                required: true
            }
        },
        messages: {
            account_holder_name: {
                required: "Please enter the account holder's name",
                minlength: "Name must be at least 3 characters long",
                maxlength: "Name cannot exceed 50 characters"
            },
            account_number: {
                required: "Please enter the account number",
                digits: "Only numbers allowed",
                minlength: "Account number must be at least 6 digits",
                maxlength: "Account number cannot exceed 18 digits",
                remote: "This account number is already registered."
            },
            re_enter_account_number: {
                required: "Please re-enter the account number",
                digits: "Only numbers allowed",
                minlength: "Account number must be at least 6 digits",
                maxlength: "Account number cannot exceed 18 digits",
                equalTo: "Account numbers do not match"
            },
            ifsc_code: {
                required: "Please enter the IFSC code"
            },
            city: {
                required: "Please enter the city"
            },
            state: {
                required: "Please enter the state"
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("text-danger");
            error.insertAfter(element);
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    // Prevent form submission when clicking "Save Changes"
    $("#bank-btn-sub").click(function () {
        if ($("#bank-form").valid()) {
            $("#bank-form").submit();
        }
    });
});

</script>


</html>