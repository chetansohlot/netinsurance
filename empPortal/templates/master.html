<!DOCTYPE html>
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  {% include 'head.html' %}
  {% load static %}
  <script src="{% static 'dist/js/jquery.min.js' %}"></script>
  <script src="{% static 'dist/js/custom.js' %}"></script>
</head>

<style>
  #loader {
  position: fixed;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9); /* Semi-transparent background */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

#loader img {
  width: 500px; /* Adjust size as needed */
  height: auto;
}

</style>
<div id="loader">
  <img src="/empPortal/static/dist/img/loader.gif" alt="Loading..." />
</div>
{% block content %}
  
{% endblock %}

<script>
  window.addEventListener("load", function () {
      document.getElementById("loader").style.display = "none";
  });
</script>


  <!-- jQuery (Must be Loaded First) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- jQuery Validate Plugin (Must be Loaded After jQuery) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
                      
<!-- jQuery Validation Script -->
<script>
  $(document).ready(function () {
    console.log("jQuery Loaded:", !!window.jQuery);
    console.log("jQuery Validate Loaded:", typeof $.fn.validate !== "undefined");

    $("#registerForm").validate({
        rules: {
            full_name: {
                required: true,
                minlength: 3,
                maxlength: 30
            },
            gender: {
                required: true
            },
            email: {
                required: true,
                email: true,
                remote: {
                    url: "/check-email/", // Django view to check email
                    type: "POST",
                    data: {
                        email: function () {
                            return $("#email").val();
                        },
                        csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val()
                    },
                    dataFilter: function (response) {
                        var data = JSON.parse(response);
                        return data.exists ? "false" : "true"; // 'false' means email is taken
                    }
                }
            },
            mobile: {
                required: true,
                digits: true,
                minlength: 10,
                maxlength: 10
            },
            password: {
                required: true,
                minlength: 6
            },
            terms: {
                required: true
            }
        },
        messages: {
            full_name: {
                required: "Please enter your full name",
                minlength: "Name must be at least 3 characters long"
            },
            email: {
                required: "Please enter your email",
                email: "Enter a valid email",
                remote: "This email is already registered."
            },
            mobile: {
                required: "Please enter your mobile number",
                digits: "Only numbers allowed",
                minlength: "Must be 10 digits",
                maxlength: "Must be 10 digits"
            },
            password: {
                required: "Please enter your password",
                minlength: "Password must be at least 6 characters long"
            },
            terms: {
                required: "You must agree to the Terms & Conditions"
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("text-danger");
            error.insertAfter(element);
        },
        submitHandler: function (form) {
            form.submit();
        }
    });
});

  </script>
</html>